openapi: 3.0.4
info:
  title: RDPMS API v1
  description: RDPMS API v1
  version: v1
paths:
  /api/v1/data/collections:
    get:
      tags:
        - Collections
      summary: Get all collections.
      parameters:
        - name: projectId
          in: query
          description: Used to filter for collections with this parent project
          schema:
            type: string
            format: uuid
        - name: projectSlug
          in: query
          description: Used to filter for collections with this parent project
          schema:
            type: string
        - name: slug
          in: query
          description: Used to filter for collections with this slug
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CollectionSummaryDTO'
    post:
      tags:
        - Collections
      summary: Add a single item to the system.
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CollectionSummaryDTO'
      responses:
        '200':
          description: OK
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/collections/{id}':
    get:
      tags:
        - Collections
      summary: Get a single collection by id.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollectionDetailedDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  '/api/v1/data/collections/{id}/metadata/{key}':
    put:
      tags:
        - Collections
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          required: true
          schema:
            type: string
        - name: schemaId
          in: query
          schema:
            type: string
            format: uuid
        - name: defaultMetadataId
          in: query
          schema:
            type: string
            format: uuid
        - name: target
          in: query
          schema:
            $ref: '#/components/schemas/MetadataColumnTargetDTO'
      responses:
        '200':
          description: OK
        '201':
          description: Created
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    post:
      tags:
        - Collections
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          required: true
          schema:
            type: string
        - name: newKey
          in: query
          schema:
            type: string
        - name: target
          in: query
          schema:
            $ref: '#/components/schemas/MetadataColumnTargetDTO'
      responses:
        '200':
          description: OK
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    delete:
      tags:
        - Collections
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          required: true
          schema:
            type: string
        - name: target
          in: query
          schema:
            $ref: '#/components/schemas/MetadataColumnTargetDTO'
      responses:
        '200':
          description: OK
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/content-types:
    get:
      tags:
        - ContentTypes
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ContentTypeDTO'
    post:
      tags:
        - ContentTypes
      summary: Add a single content type to the system.
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContentTypeDTO'
      responses:
        '200':
          description: OK
  /api/v1/data/content-types/batch:
    post:
      tags:
        - ContentTypes
      summary: Add a batch of content types to the system.
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ContentTypeDTO'
      responses:
        '200':
          description: OK
  '/api/v1/data/content-types/{id}':
    get:
      tags:
        - ContentTypes
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContentTypeDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/v1/data/datasets:
    get:
      tags:
        - DataSets
      summary: Query data sets.
      parameters:
        - name: collectionId
          in: query
          description: ''
          schema:
            type: string
            format: uuid
        - name: deleted
          in: query
          description: "comma-separated list of strings, case-insensitive.\n            Default is RDPMS.Core.Persistence.Model.DeletionState.Active\n            Valid values can be found in RDPMS.Core.Persistence.Model.DeletionState."
          schema:
            type: string
        - name: view
          in: query
          description: 'Whether to only return dataset summaries (default), or metadata as well.'
          schema:
            $ref: '#/components/schemas/DataSetListViewMode'
        - name: metadataTarget
          in: query
          description: "If view is set to yield metadata,\n            they will be set either on datasets or files."
          schema:
            $ref: '#/components/schemas/MetadataColumnTargetDTO'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DataSetSummaryDTO'
    post:
      tags:
        - DataSets
      summary: 'Query datasets, with additional metadata-based query.'
      parameters:
        - name: collectionId
          in: query
          description: ''
          schema:
            type: string
            format: uuid
        - name: deleted
          in: query
          description: "comma-separated list of strings, case-insensitive.\n            Default is RDPMS.Core.Persistence.Model.DeletionState.Active\n            Valid values can be found in RDPMS.Core.Persistence.Model.DeletionState."
          schema:
            type: string
        - name: view
          in: query
          description: 'Whether to only return dataset summaries (default), or metadata as well.'
          schema:
            $ref: '#/components/schemas/DataSetListViewMode'
        - name: metadataTarget
          in: query
          description: "If view is set to yield metadata,\n            they will be set either on datasets or files."
          schema:
            $ref: '#/components/schemas/MetadataColumnTargetDTO'
      requestBody:
        description: Query over metadata items.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MetadataQueryDTO'
          text/json:
            schema:
              $ref: '#/components/schemas/MetadataQueryDTO'
          application/*+json:
            schema:
              $ref: '#/components/schemas/MetadataQueryDTO'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DataSetSummaryDTO'
  '/api/v1/data/datasets/{id}':
    get:
      tags:
        - DataSets
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataSetSummaryDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
    delete:
      tags:
        - DataSets
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: No Content
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  /api/v1/data/datasets/new:
    post:
      tags:
        - DataSets
      summary: Add a single item to the system.
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataSetCreateRequestDTO'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataSetSummaryDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  '/api/v1/data/datasets/{id}/add/s3':
    post:
      tags:
        - DataSets
      summary: Add a single file to the system. Request a single S3 upload URL.
      parameters:
        - name: id
          in: path
          description: ''
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/S3FileCreateRequestDTO'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileCreateResponseDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileCreateResponseDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/datasets/{id}/seal':
    put:
      tags:
        - DataSets
      summary: Seals a data set. Only works for data sets that are in "Uninitialized" state.
      parameters:
        - name: id
          in: path
          description: The data set id.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/datasets/{id}/metadata/{key}':
    put:
      tags:
        - DataSets
      summary: Adds or sets meta documents for a data set.
      parameters:
        - name: id
          in: path
          description: ID of the data set
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: Case-insensitive key of the meta date on the data set
          required: true
          schema:
            type: string
      requestBody:
        description: JSON meta document
        content:
          application/octet-stream:
            schema:
              type: string
              format: byte
          application/json:
            schema:
              type: string
              format: byte
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    post:
      tags:
        - DataSets
      summary: Rename key for metadate relation.
      parameters:
        - name: id
          in: path
          description: The dataset ID.
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: The old key.
          required: true
          schema:
            type: string
        - name: newKey
          in: query
          description: The new key.
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    delete:
      tags:
        - DataSets
      summary: Removes metadate relation with resp. key.
      parameters:
        - name: id
          in: path
          description: ID of the dataset.
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: Key to remove the relation for
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/files:
    get:
      tags:
        - Files
      summary: Get files.
      parameters:
        - name: view
          in: query
          schema:
            $ref: '#/components/schemas/FileListViewMode'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FileSummaryDTO'
  '/api/v1/data/files/{id}':
    get:
      tags:
        - Files
      summary: Get details of a single file.
      parameters:
        - name: id
          in: path
          description: Id of the file.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileSummaryDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetails'
  '/api/v1/data/files/{id}/content':
    get:
      tags:
        - Files
      summary: "Request redirect to a file.\nOn success, a 302 referring to the final download URL will be returned."
      parameters:
        - name: id
          in: path
          description: Id of the file to download.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '302':
          description: Found
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/files/{id}/blob':
    get:
      tags:
        - Files
      summary: "Request a download of a file. Not all files are available for download.\nOn success, the raw bytes will be returned."
      parameters:
        - name: id
          in: path
          description: Id of the file to download.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/json:
              schema:
                type: string
                format: binary
        '400':
          description: Bad Request
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '404':
          description: Not Found
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '501':
          description: Not Implemented
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/file-refs:
    get:
      tags:
        - Files
      parameters:
        - name: storeGuid
          in: query
          schema:
            type: string
            format: uuid
        - name: type
          in: query
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileSummaryDTO'
  '/api/v1/data/files/{id}/metadata/{key}':
    put:
      tags:
        - Files
      summary: Adds or sets meta documents for a file.
      parameters:
        - name: id
          in: path
          description: ID of the file
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: Case-insensitive key of the meta date on the file
          required: true
          schema:
            type: string
      requestBody:
        description: JSON meta document
        content:
          application/octet-stream:
            schema:
              type: string
              format: byte
          application/json:
            schema:
              type: string
              format: byte
      responses:
        '200':
          description: OK
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
        '201':
          description: Created
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    post:
      tags:
        - Files
      summary: Rename key for metadate relation.
      parameters:
        - name: id
          in: path
          description: The file ID.
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: The old key.
          required: true
          schema:
            type: string
        - name: newKey
          in: query
          description: The new key.
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
        '404':
          description: Not Found
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    delete:
      tags:
        - Files
      summary: Removes metadate relation with resp. key.
      parameters:
        - name: id
          in: path
          description: ID of the file.
          required: true
          schema:
            type: string
            format: uuid
        - name: key
          in: path
          description: Key to remove the relation for
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
            text/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/metadata:
    get:
      tags:
        - MetaData
      summary: Get all metadata. Contents can be retrieved via Files API.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MetaDateDTO'
  '/api/v1/data/metadata/{id}':
    get:
      tags:
        - MetaData
      summary: Get a single meta date by id. Content can be retrieved via Files API.
      parameters:
        - name: id
          in: path
          description: Id of the meta date
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetaDateDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/metadata/{id}/validate/{schemaId}':
    put:
      tags:
        - MetaData
      summary: "Validate meta date against a schema and return a detailed result.\nIf verbose mode is enabled, validator traces are included."
      parameters:
        - name: id
          in: path
          description: ID
          required: true
          schema:
            type: string
            format: uuid
        - name: schemaId
          in: path
          description: ''
          required: true
          schema:
            type: string
            format: uuid
        - name: verbose
          in: query
          description: ''
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaValidationResultDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/schemas:
    get:
      tags:
        - MetaData
      summary: Get all schemas registered in the system.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SchemaDTO'
    post:
      tags:
        - MetaData
      summary: Add a new schema to the system.
      requestBody:
        description: The JSON document
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/schemas/{id}/blob':
    get:
      tags:
        - MetaData
      summary: Get the raw value of a schema.
      parameters:
        - name: id
          in: path
          description: Guid of the schema.
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string
                format: binary
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/projects:
    get:
      tags:
        - Projects
      summary: Get all projects.
      parameters:
        - name: slug
          in: query
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProjectSummaryDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/projects/{id}':
    get:
      tags:
        - Projects
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectSummaryDTO'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
    put:
      tags:
        - Projects
      summary: Id field on the body is ignored.
      parameters:
        - name: id
          in: path
          description: ''
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectSummaryDTO'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessageDTO'
  /api/v1/data/stores:
    get:
      tags:
        - Stores
      summary: Get all data stores.
      parameters:
        - name: type
          in: query
          schema:
            type: string
        - name: parentProjectId
          in: query
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DataStoreSummaryDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ErrorMessageDTO'
  '/api/v1/data/stores/{id}':
    get:
      tags:
        - Stores
      summary: Get a single data store by id.
      parameters:
        - name: id
          in: path
          description: ''
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataStoreSummaryDTO'
components:
  schemas:
    AssignedMetaDateDTO:
      type: object
      properties:
        metadataKey:
          type: string
          description: Key linking an entity to a meta date.
          nullable: true
        metadataId:
          type: string
          description: Id of the meta date.
          format: uuid
          nullable: true
        field:
          $ref: '#/components/schemas/MetaDateDTO'
        inherited:
          type: boolean
          description: Whether this meta date is inherited from the parent collection.
          nullable: true
        collectionSchemaVerified:
          type: boolean
          description: 'Whether the schema, the collection declares for this key, has been verified.'
          nullable: true
      additionalProperties: false
    CollectionDetailedDTO:
      allOf:
        - $ref: '#/components/schemas/CollectionSummaryDTO'
        - type: object
          properties:
            metaDateColumns:
              type: array
              items:
                $ref: '#/components/schemas/MetaDateCollectionColumnDTO'
              nullable: true
          additionalProperties: false
    CollectionSummaryDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        slug:
          type: string
          nullable: true
        name:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        dataSetCount:
          type: integer
          description: Count of active (deletion neither pending nor completed) datasets in this collection.
          format: int32
          nullable: true
        defaultDataStoreId:
          type: string
          format: uuid
          nullable: true
        projectId:
          type: string
          format: uuid
          nullable: true
      additionalProperties: false
    ContentTypeDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        abbreviation:
          type: string
          nullable: true
        displayName:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        mimeType:
          type: string
          nullable: true
      additionalProperties: false
    DataSetCreateRequestDTO:
      type: object
      properties:
        slug:
          type: string
          description: Optional human-readable identifier.
          nullable: true
        name:
          type: string
          description: Mandatory dataset name.
          nullable: true
        createdStampUTC:
          type: string
          description: Mandatory creation timestamp in UTC.
          format: date-time
          nullable: true
        collectionId:
          type: string
          description: Mandatory parent collection id.
          format: uuid
          nullable: true
      additionalProperties: false
      description: "Request body for creating a new dataset.\nKept non-polymorphic on purpose to avoid discriminator/subtype binding issues."
    DataSetListViewMode:
      enum:
        - Summary
        - Metadata
      type: string
    DataSetSummaryDTO:
      type: object
      properties:
        id:
          type: string
          description: Uniquely identifies the dataset. Typically server-generated. Should not be manually set by the client.
          format: uuid
          nullable: true
        slug:
          type: string
          description: 'An optional, human-readable identifier for the dataset.'
          nullable: true
        name:
          type: string
          description: 'Non-unique, mandatory descriptive name of the dataset. Must be provided by the client.'
          nullable: true
        assignedTags:
          type: array
          items:
            $ref: '#/components/schemas/TagDTO'
          description: 'List of tags associated with the dataset, used for categorization and filtering purposes.'
          nullable: true
        createdStampUTC:
          type: string
          description: "UTC timestamp when the dataset was originally created.\nMandatory property, should be provided by the client."
          format: date-time
          nullable: true
        deletedStampUTC:
          type: string
          description: "UTC timestamp that indicates when the dataset was deleted.\nNull if the dataset has not been deleted yet."
          format: date-time
          nullable: true
        beginStampUTC:
          type: string
          description: "UTC timestamp that marks the period begin of the dataset.\nOnly to be set by server."
          format: date-time
          nullable: true
        endStampUTC:
          type: string
          description: "UTC timestamp that marks the period end of the dataset.\nOnly to be set by server."
          format: date-time
          nullable: true
        lifecycleState:
          type: string
          description: "Indicates, whether the dataset (and its files) are immutable.\nOnly to be set by server.\nLifecycle is: Uninitialized -> Sealed"
          nullable: true
        deletionState:
          $ref: '#/components/schemas/DeletionStateDTO'
        isTimeSeries:
          type: boolean
          description: "Indicates if the dataset represents time-series data.\nOnly to be set by server."
          nullable: true
        metaDates:
          type: array
          items:
            $ref: '#/components/schemas/AssignedMetaDateDTO'
          description: "Fields, for which metadata exists.\nOnly to be set by server."
          nullable: true
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileSummaryDTO'
          description: "Files of the dataset.\nNull means this information is not included.\nEmpty means this dataset has no files."
          nullable: true
        fileCount:
          type: integer
          description: Amount of files in the dataset.
          format: int32
        collectionId:
          type: string
          description: Id of the collection this dataset belongs to.
          format: uuid
          nullable: true
      additionalProperties: false
      description: "Represents a summary of a dataset, including identifying information, timestamps, state, tags,\nand metadata fields."
    DataStoreSummaryDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        slug:
          type: string
          nullable: true
        name:
          type: string
          nullable: true
        filesCount:
          type: integer
          format: int32
          nullable: true
        storageType:
          type: string
          nullable: true
        propertiesJson:
          type: string
          nullable: true
        projectId:
          type: string
          format: uuid
          nullable: true
        canWrite:
          type: boolean
          description: 'Whether the store accepts new data, or is read-only.'
      additionalProperties: false
    DeletionStateDTO:
      enum:
        - Active
        - DeletionPending
        - Deleted
      type: string
      description: Enum indicating whether an entity was deleted.
    ErrorMessageDTO:
      type: object
      properties:
        message:
          type: string
          description: "The error message. This must be set. If the \"user friendly\" RDPMS.Core.Server.Model.DTO.V1.ErrorMessageDTO.DisplayMessage is set, this may\nbecome technical."
          nullable: true
        displayMessage:
          type: string
          description: 'A message dedicated to the user. If null, use RDPMS.Core.Server.Model.DTO.V1.ErrorMessageDTO.Message as fallback.'
          nullable: true
      additionalProperties: false
    FileCreateRequestDTO:
      type: object
      properties:
        name:
          type: string
          nullable: true
        contentTypeId:
          type: string
          format: uuid
          nullable: true
        sizeBytes:
          type: integer
          format: int64
          nullable: true
        plainSHA256Hash:
          type: string
          nullable: true
        createdStamp:
          type: string
          format: date-time
          nullable: true
        beginStamp:
          type: string
          format: date-time
          nullable: true
        endStamp:
          type: string
          format: date-time
          nullable: true
      additionalProperties: false
    FileCreateResponseDTO:
      type: object
      properties:
        uploadUri:
          type: string
          nullable: true
        fileId:
          type: string
          format: uuid
          nullable: true
      additionalProperties: false
    FileListViewMode:
      enum:
        - Summary
        - Metadata
      type: string
    FileStorageReferenceSummaryDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        compressionAlgorithm:
          type: string
          nullable: true
        sizeBytes:
          type: integer
          format: int64
          nullable: true
        shA256Hash:
          type: string
          nullable: true
        storageType:
          type: string
          nullable: true
      additionalProperties: false
    FileSummaryDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        name:
          type: string
          nullable: true
        downloadURI:
          type: string
          nullable: true
        contentType:
          $ref: '#/components/schemas/ContentTypeDTO'
        size:
          type: integer
          format: int64
          nullable: true
        createdStampUTC:
          type: string
          format: date-time
          nullable: true
        deletedStampUTC:
          type: string
          format: date-time
          nullable: true
        beginStampUTC:
          type: string
          format: date-time
          nullable: true
        endStampUTC:
          type: string
          format: date-time
          nullable: true
        isTimeSeries:
          type: boolean
          nullable: true
        metaDates:
          type: array
          items:
            $ref: '#/components/schemas/AssignedMetaDateDTO'
          description: "Fields, for which metadata exists.\nOnly to be set by server."
          nullable: true
        deletionState:
          $ref: '#/components/schemas/DeletionStateDTO'
        references:
          type: array
          items:
            $ref: '#/components/schemas/FileStorageReferenceSummaryDTO'
          description: "Storage references of the file.\nNull means this information is not included.\nEmpty means this file currently has no references."
          nullable: true
      additionalProperties: false
    HttpValidationProblemDetails:
      allOf:
        - $ref: '#/components/schemas/ProblemDetails'
        - type: object
          properties:
            errors:
              type: object
              additionalProperties:
                type: array
                items:
                  type: string
              nullable: true
          additionalProperties: { }
    MetaDateCollectionColumnDTO:
      type: object
      properties:
        metadataKey:
          type: string
          nullable: true
        schema:
          $ref: '#/components/schemas/SchemaDTO'
        defaultFieldId:
          type: string
          format: uuid
          nullable: true
        target:
          $ref: '#/components/schemas/MetadataColumnTargetDTO'
      additionalProperties: false
    MetaDateDTO:
      type: object
      properties:
        id:
          type: string
          description: The id of this meta date.
          format: uuid
          nullable: true
        validatedSchemas:
          type: array
          items:
            $ref: '#/components/schemas/SchemaDTO'
          description: List of schema ids that have been validated against this meta date.
          nullable: true
        fileId:
          type: string
          description: The id of the file representing the stored meta date. Retrieve content via Files API.
          format: uuid
          nullable: true
      additionalProperties: false
    MetadataColumnTargetDTO:
      enum:
        - Dataset
        - File
      type: string
    MetadataQueryDTO:
      type: object
      properties:
        mode:
          $ref: '#/components/schemas/QueryMode'
        queries:
          type: array
          items:
            $ref: '#/components/schemas/MetadataQueryPartDTO'
          nullable: true
      additionalProperties: false
    MetadataQueryPartDTO:
      type: object
      properties:
        query:
          type: object
        metadataKey:
          type: string
          nullable: true
        target:
          $ref: '#/components/schemas/MetadataColumnTargetDTO'
      additionalProperties: false
    ProblemDetails:
      type: object
      properties:
        type:
          type: string
          nullable: true
        title:
          type: string
          nullable: true
        status:
          type: integer
          format: int32
          nullable: true
        detail:
          type: string
          nullable: true
        instance:
          type: string
          nullable: true
      additionalProperties: { }
    ProjectSummaryDTO:
      type: object
      properties:
        id:
          type: string
          description: The id of this project.
          format: uuid
          nullable: true
        slug:
          type: string
          description: The slug of this project.
          nullable: true
        name:
          type: string
          description: The name of this project.
          nullable: true
        description:
          type: string
          nullable: true
        collections:
          type: array
          items:
            $ref: '#/components/schemas/CollectionSummaryDTO'
          description: All collections assigned to this project.
          nullable: true
        dataStores:
          type: array
          items:
            $ref: '#/components/schemas/DataStoreSummaryDTO'
          description: All data stores assigned to this project.
          nullable: true
      additionalProperties: false
    QueryMode:
      enum:
        - And
        - Or
      type: string
    S3FileCreateRequestDTO:
      allOf:
        - $ref: '#/components/schemas/FileCreateRequestDTO'
        - type: object
          properties:
            compressionAlgorithm:
              type: string
              nullable: true
            compressedSHA256Hash:
              type: string
              description: 'If file is compressed, this is the SHA256 hash of the compressed file.'
              nullable: true
            compressedSizeBytes:
              type: integer
              format: int64
              nullable: true
          additionalProperties: false
    SchemaDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        schemaId:
          type: string
          nullable: true
      additionalProperties: false
    SchemaValidationResultDTO:
      type: object
      properties:
        succesful:
          type: boolean
          description: Wether validation of the meta date was succesful or not.
          nullable: true
        reasons:
          type: array
          items:
            type: string
          description: 'If validation failed, a list of reasons why.'
          nullable: true
        traces:
          type: array
          items:
            type: string
          description: 'Optional validation trace output, intended for debugging.'
          nullable: true
      additionalProperties: false
    TagDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: true
        name:
          type: string
          nullable: true
      additionalProperties: false